package selenium;

import com.codeborne.selenide.*;
import io.github.bonigarcia.wdm.WebDriverManager;
import org.openqa.selenium.*;
import org.testng.Assert;
import org.testng.annotations.*;
import static com.codeborne.selenide.Selenide.*;

public class SelenideOpenTest {

    @BeforeClass
    public static void setup() {
        Configuration.browser = "chrome";
        WebDriverManager.chromedriver().browserVersion("84.0.4147.30").setup();
        Configuration.baseUrl = "https://www.open.ru/";
        //Configuration.browserSize = "1920x1080";
        Configuration.timeout = 10000;
    }

    @AfterClass
    public static void close() {
        closeWebDriver();
    }

    @Test
    public void usdTest() {
        open(Configuration.baseUrl);
        String usdSale = $(By.xpath("(//*[contains(@class,'main-page-exchange__row')][contains(.,'USD')]//*[@class='main-page-exchange__rate'])[2]"))
                .getText();
        String usdPurchaseS = $(By.xpath("(//*[contains(@class,'main-page-exchange__row')][contains(.,'USD')]//*[@class='main-page-exchange__rate'])[1]"))
                .getText();

        Double usdSale2 = Double.parseDouble(usdSale.replaceAll(",", "."));
        Double usdPurchase = Double.parseDouble(usdPurchaseS.replaceAll(",", "."));

        Assert.assertTrue(usdPurchase < usdSale2);
    }

    @Test
    public void euroTest() {
        open(Configuration.baseUrl);
        String euroSale = $(By.xpath("(//*[contains(@class,'main-page-exchange__row')][contains(.,'EUR')]//*[@class='main-page-exchange__rate'])[2]"))
                .getText();
        String euroPurchaseS = $(By.xpath("(//*[contains(@class,'main-page-exchange__row')][contains(.,'EUR')]//*[@class='main-page-exchange__rate'])[1]"))
                .getText();

        Double euroSale2 = Double.parseDouble(euroSale.replaceAll(",", "."));
        Double euroPurchase = Double.parseDouble(euroPurchaseS.replaceAll(",", "."));

        Assert.assertTrue(euroPurchase < euroSale2);

    }
}